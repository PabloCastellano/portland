<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl"
   href="http://docbook.sourceforge.net/release/xsl/current/manpages/docbook.xsl"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
    "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd" [
]>
<refentry id="xdg-mime">
  <refentryinfo>
    <title>xdg-mime Manual</title>
    <copyright>
      <year>2006</year>
    </copyright>
    <author>
      <firstname>Kevin</firstname>
      <surname>Krammer</surname>
    </author>
    <address><email>kevin.krammer@gmx.at</email></address>
    <author>
      <firstname>Jeremy</firstname>
      <surname>White</surname>
    </author>
    <address><email>jwhite@codeweavers.com</email></address>
    <releaseinfo>This is release 0.5 of the xdg-mime Manual.</releaseinfo>
  </refentryinfo>

  <refmeta>
    <refentrytitle>xdg-mime</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>xdg-mime</refname>
    <refpurpose>command line tool for querying information about file type handling
and adding descriptions for new file types</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>xdg-mime</command>
      <arg choice="plain"><option>--query <replaceable>what</replaceable></option></arg>
      <arg choice="plain"><replaceable>FILE</replaceable></arg>
    </cmdsynopsis>
    <cmdsynopsis>
      <command>xdg-mime</command>
      <arg choice="plain"><option>--install</option></arg>	
      <group choice="req">
	<arg choice="plain"><option>--user</option></arg>
	<arg choice="plain"><option>--system</option></arg>
      </group>
      <arg choice="plain"><replaceable>mimetypes-file</replaceable></arg>
    </cmdsynopsis>
    <cmdsynopsis>
      <command>xdg-mime</command>
      <arg choice="plain"><option>--uninstall</option></arg>	
      <group choice="req">
	<arg choice="plain"><option>--user</option></arg>
	<arg choice="plain"><option>--system</option></arg>
      </group>
      <arg choice="plain"><replaceable>mimetypes-file</replaceable></arg>
    </cmdsynopsis>
    <cmdsynopsis>
      <command>xdg-mime</command>
      <group choice="req">
        <arg choice="plain"><option>--help</option></arg>
        <arg choice="plain"><option>--version</option></arg>
      </group>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsect1 id="description">
    <title>Description</title>
    <para>
      The xdg-mime program can be used to query information about file types
      and to add descriptions for new file types.
    </para>
  </refsect1>
  <refsect1 id="options">
    <title>Options</title>
    <variablelist>
      <varlistentry>
	<term><option>--query</option> <replaceable>what</replaceable></term>
	<listitem>
	  <simpara>
	    Returns information related to the file type of <replaceable>FILE</replaceable>
            as specified by <replaceable>what</replaceable>:
	  </simpara>
	  <simpara><emphasis>type</emphasis>:
	    Returns the file type of <replaceable>FILE</replaceable> in the form of a MIME type.
	  </simpara>
	  <simpara><emphasis>default</emphasis>:
	    Returns the default application that the desktop environment uses for opening
	    <replaceable>FILE</replaceable>. The default applications is
            identified by its *.desktop file.
	  </simpara>
	</listitem>
      </varlistentry>


      <varlistentry>
	<term><option>--install</option></term>
	<listitem>
	  <simpara>
	    Adds the file type descriptions provided in <replaceable>mimetypes-file</replaceable>
            to the desktop environment. <replaceable>mimetypes-file</replaceable>
            must be a XML file that follows the freedesktop.org 
            Shared MIME-info Database specification
            and that has a mime-info element as its document root.
	  </simpara>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><option>--uninstall</option></term>
	<listitem>
	  <simpara>
	    Removes the file type descriptions provided in <replaceable>mimetypes-file</replaceable>
            and previously added with <command>xdg-mime --install</command> from the
            desktop environment. <replaceable>mimetypes-file</replaceable>
            must be a XML file that follows the freedesktop.org
            Shared MIME-info Database specification
            and that has a mime-info element as its document root.
	  </simpara>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><option>--user</option></term>
	<listitem>
	  <simpara>
	    Adds or removes file type descriptions for the current user only.
	  </simpara>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><option>--system</option></term>
	<listitem>
	  <simpara>
	    Adds or removes file type descriptions for all users on the system.
            Usually only root is allowed to do this.
	  </simpara>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><option>--help</option></term>
	<listitem>
	  <simpara>
	    Show this help.
	  </simpara>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--version</option></term>
        <listitem>
          <simpara>
            Show the xdg-utils version information.
          </simpara>
        </listitem>
      </varlistentry>

    </variablelist>
  </refsect1>
  <refsect1 id="examples">
    <title>Examples</title>
    <para>
<programlisting>
xdg-mime --query type /tmp/foobar.png
</programlisting>
      Prints the MIME type of the file /tmp/foobar.png
    </para>
    <para>
<programlisting>
xdg-mime --query default /tmp/foobar.png
</programlisting>
      Prints the name of the .desktop file of the application which is
      registered to open files of the MIME type the file /tmp/foobar.png has
    </para>
    <para>
<programlisting>
xdg-mime --install --system diff.xml
</programlisting>
      Adds a file type description for "diff"-files for all users on the
      system. The file type description could look as folows.  
<programlisting>
diff.xml:

&lt;?xml version="1.0"?&gt;
&lt;mime-info xmlns='http://www.freedesktop.org/standards/shared-mime-info'&gt;
  &lt;mime-type type="text/x-diff"&gt;
    &lt;comment&gt;Differences between files&lt;/comment&gt;
    &lt;glob pattern="*.diff"/&gt;
    &lt;glob pattern="*.patch"/&gt;
  &lt;/mime-type&gt;
&lt;/mime-info&gt;
</programlisting>
    </para>
  </refsect1>
</refentry>
